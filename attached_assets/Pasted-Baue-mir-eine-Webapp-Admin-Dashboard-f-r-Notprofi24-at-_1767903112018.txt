Baue mir eine Webapp (Admin-Dashboard) für Notprofi24.at.
Ziel: Notprofi24.at vermittelt Notdienste (Installateur, Elektriker, Schlosser, Dachdecker usw.) an Hausverwaltungen/Objekte, protokolliert Einsätze, verwaltet Vermittlungsgebühren und erstellt automatisch Monatsrechnungen. Alles muss als PDF exportierbar sein. Am Ende soll ich das Projekt downloaden und auf Render deployen können. Datenbank: Supabase.

1) Tech-Vorgaben

DB & Auth: Supabase (Postgres + Supabase Auth).

Deployment: Render (Backend + Frontend, oder Fullstack in einem Repo).

PDF: Serverseitige PDF-Erstellung (z. B. pdf-lib oder Puppeteer/Playwright HTML→PDF).

Admin-Zugang: Nur Admin darf alles sehen/ändern.

Lege Admin-User über Supabase Auth an (E-Mail unten) und sichere Admin-Rolle per Tabelle/Claim.

Keine Passwörter im Code hardcoden. Secrets nur über ENV.

2) Stammdaten (Notprofi24 Rechnungskopf)

Diese Daten sollen in der App als “Unternehmensdaten Notprofi24” gespeichert sein (editierbar im Admin-Bereich) und bei Rechnungen/PDFs automatisch verwendet werden:

Firma/Name: Tufan Dönmezyürek / Notprofi24.at

Adresse: Heiligenstädterstraße 152/6, 1190 Wien

E-Mail: office@notprofi24.at

Website: www.notprofi24.at

3) Kern-Features (CRUD + Beziehungen)

A) Hausverwaltungen verwalten

Felder: Name, Adresse (Straße, PLZ, Ort), Telefon, E-Mail, Notizen

Liste / Suche / Detailansicht / Bearbeiten / Löschen

B) Firmen verwalten (Notdienst-Partner)

Felder: Firmenname, Ansprechpartner, Adresse, Telefon, E-Mail, Gewerke/Tags (Installateur/Elektriker/…), UID (optional), Zahlungsziel (z. B. 14 Tage), Notizen, aktiv/inaktiv

C) Zuordnung: welche Firma arbeitet mit welcher Hausverwaltung

Many-to-Many Beziehung: “Kooperationen”

UI: In Firma-Detail und Hausverwaltung-Detail zuordenbar (Checkboxen / Multi-Select)

4) Vermittlungsaufträge & Einsatzprotokolle

D) Vermittlungsauftrag (Notdienstvermittlung)

Muss erfassbar sein mit:

Auftragsnummer (automatisch generieren, eindeutig)

Datum/Uhrzeit

Hausverwaltung auswählen

Firma auswählen (nur passende/aktive Firmen, optional nach Gewerk filterbar)

Objekt/Adresse des Einsatzortes (kann von Hausverwaltung abweichen)

Gewerk (Installateur, Elektriker, …)

Kurzbeschreibung / Problem

Status: offen / erledigt / storniert

Vermittlungsgebühr (Betrag) – individuell pro Auftrag eingeben

Notizen intern

Der Auftrag soll im System speichern, welcher Notdienst an welche Firma vermittelt wurde.

E) Einsatzprotokoll

Pro Vermittlungsauftrag optional ein ausführliches Protokoll:

Arbeitsschritte, Zeiten, Material (optional), Ergebnis, Fotos optional (wenn möglich später)

PDF Export: “Einsatzprotokoll als PDF”

5) Abrechnung & Monatslogik

F) Monatszählung & Dashboard-Erinnerungen

Ab erstem Tag des Monats sollen Vermittlungen pro Firma gezählt werden.

Dashboard:

“Dieser Monat: Vermittlungen pro Firma” (Anzahl + Summe Vermittlungsgebühren)

Offene Beträge/Erinnerung: Firmen, die noch nicht bezahlt haben

Filter: Monat/Jahr auswählbar (Standard aktueller Monat)

G) Monatsrechnung automatisch erzeugen (Monatsende)

Implementiere eine Funktion: “Rechnung für Monat X erzeugen”

Eine Rechnung wird pro Firma erstellt und enthält:

Rechnungsnummer (fortlaufend, eindeutig, Format z. B. NP24-YYYYMM-####)

Rechnungsdatum

Leistungszeitraum (Monat/Jahr)

Firmendaten (Empfänger)

Tabelle: alle vermittelten Aufträge in diesem Monat:

Auftragsnummer

Datum

Hausverwaltung (Name + Adresse)

Einsatzort/Adresse

Gewerk

Vermittlungsgebühr (Betrag)

Gesamtsumme

Hinweistext “Zahlungserinnerung / Bitte überweisen bis …” (Zahlungsziel aus Firmendaten)

Die Rechnung muss als PDF downloadbar sein und in der DB gespeichert werden (Metadaten + PDF-File in Supabase Storage).

Nach Rechnungserstellung Status setzen: “in Rechnung gestellt”

Wenn bezahlt: Admin kann “bezahlt am” Datum setzen → verschwindet aus Erinnerungen.

6) PDF Downloads (überall)

PDF Download für:

Einzelner Vermittlungsauftrag (Auftragsblatt)

Einsatzprotokoll

Monatsrechnung

Optional: Exportlisten (CSV/PDF) für Monat/Zeitraum

7) UI-Seiten (Minimum)

Login (Supabase Auth)

Dashboard (Monatsübersicht, Erinnerungen, Schnellaktionen)

Hausverwaltungen (Liste/Neu/Detail)

Firmen (Liste/Neu/Detail)

Kooperationen (in den Details integrieren oder eigene Seite)

Vermittlungsaufträge (Liste/Filter/Neu/Detail)

Rechnungen (Liste nach Monat/Firma, Download, bezahlt markieren)

Einstellungen (Notprofi24-Daten, Nummernkreise, Standardtexte)

8) Datenmodell (Supabase Tabellen – Vorschlag)

house_managements

companies

company_house_links (many-to-many)

jobs (Vermittlungsaufträge)

job_reports (Einsatzprotokolle)

invoices

invoice_items (Jobs des Monats)

payments oder Felder in invoices (paid_at, status)

app_settings (Notprofi24 Kopfzeile, Texte, Nummernkreis)

Rollen/Permissions: admin_users oder RLS über profiles mit role='admin'

Aktiviere Row Level Security und erlaube Zugriff nur für Admin.

9) Qualität & Sicherheit

Validierungen (Pflichtfelder, E-Mail Format, Beträge >= 0)

Suchfunktion (Name/Adresse/Telefon)

Sauberes Logging und Fehlerbehandlung

Keine sensiblen Daten im Repo; nutze ENV für Supabase keys, Render config.

10) Abschluss / Deliverables

Repo mit sauberer Struktur + README:

lokale Installation

Supabase Setup (Tabellen, RLS, Storage Buckets)

Render Deployment Schritte

Beispiel Seed Daten (optional)

Alle wichtigen Funktionen müssen direkt lauffähig sein.